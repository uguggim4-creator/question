<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question Slot Machine</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a3d2e 0%, #1a5c47 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .container {
            width: 90%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .slot-machine {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 40px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            width: 100%;
        }

        .slot-window {
            height: 200px;
            overflow: hidden;
            position: relative;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slot-reel {
            position: absolute;
            width: 100%;
            transition: transform 0.1s linear;
        }

        .slot-item {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            font-size: 20px;
            font-weight: 500;
            color: white;
            text-align: center;
            line-height: 1.5;
        }

        .spin-button {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 18px;
            font-weight: 600;
            padding: 15px 50px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px 0 rgba(31, 38, 135, 0.3);
        }

        .spin-button:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px 0 rgba(31, 38, 135, 0.4);
        }

        .spin-button:active:not(:disabled) {
            transform: translateY(0);
        }

        .spin-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .counter {
            color: white;
            font-size: 16px;
            font-weight: 500;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .reset-button {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 16px;
            font-weight: 600;
            padding: 12px 40px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px 0 rgba(31, 38, 135, 0.3);
        }

        .reset-button:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px 0 rgba(31, 38, 135, 0.4);
        }

        .reset-button:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="slot-machine">
            <div class="slot-window">
                <div class="slot-reel" id="slotReel"></div>
            </div>
        </div>
        <button class="spin-button" id="spinButton">질문 뽑기</button>
        <div class="counter" id="counter">남은 질문: 20개</div>
        <button class="reset-button" id="resetButton">다시하기</button>
    </div>

    <script>
        const questions = [
            "오늘이 영화라면, 그 영화는 무슨 장르?",
            "어느날 갑자기 동물로 변한다면 무슨 동물?",
            "최근 빠져 있는 취미나 관심사?",
            "오늘의 베스트 드레서는 누구?",
            "올해 가장 잘한 소비는?",
            "한달 휴가가 생기면 하고 싶은 것",
            "일주일 중에 가장 나를 기분 좋게 만드는 시간",
            "내년 나의 좌우명",
            "내가 타인에게 쉽게 주는 것 vs 쉽게 못 주는 것은? (칭찬/신뢰/시간/마음/사과 등)",
            "(공통 질문) 당신은 민초파?",
            "요즘 나에게 필요한 걸 고른다면? (휴식/도파민/정리/새로운 도전)",
            "어릴 때 좋아하던 것 중 아직도 좋아하는 것?",
            "체력 유지를 위해 요즘 꾸준히 실천하고 있는 루틴?",
            "경제적 자유를 얻는다면, 매일 하고 싶은 활동?",
            "아침 9시, 밤 11시 내가 더 집중 되는 시간?",
            "커피 vs 차 vs 술",
            "올해 마지막 날, 나 자신에게 해주고 싶은 말?",
            "내년의 나에게 꼭 해주고 싶은 당부?",
            "나의 버킷리스트 1위 항목?",
            "올해 나를 가장 바쁘게 했던 것.",
        ];

        let availableQuestions = [...questions];
        let usedQuestions = [];
        let isSpinning = false;

        const slotReel = document.getElementById('slotReel');
        const spinButton = document.getElementById('spinButton');
        const counter = document.getElementById('counter');

        function updateCounter() {
            counter.textContent = `남은 질문: ${availableQuestions.length}개`;
        }

        function createSlotItems(questionsArray) {
            slotReel.innerHTML = '';
            questionsArray.forEach(question => {
                const item = document.createElement('div');
                item.className = 'slot-item';
                item.textContent = question;
                slotReel.appendChild(item);
            });
        }

        function spin() {
            if (isSpinning || availableQuestions.length === 0) return;

            isSpinning = true;
            spinButton.disabled = true;

            // 랜덤 섞기
            const shuffled = [...availableQuestions].sort(() => Math.random() - 0.5);
            
            // 선택될 질문을 마지막에 배치
            const selectedIndex = Math.floor(Math.random() * availableQuestions.length);
            const selectedQuestion = availableQuestions[selectedIndex];
            
            // 스크롤 효과를 위한 배열 생성
            const displayQuestions = [...shuffled, selectedQuestion];
            createSlotItems(displayQuestions);

            let position = 0;
            let speed = 5;
            const maxSpeed = 50;
            const acceleration = 1.15;
            const deceleration = 0.95;
            let targetPosition = (displayQuestions.length - 1) * 200;
            let isAccelerating = true;

            function animate() {
                if (isAccelerating && speed < maxSpeed) {
                    speed *= acceleration;
                    if (speed >= maxSpeed) {
                        speed = maxSpeed;
                        isAccelerating = false;
                    }
                }

                position += speed;

                if (position >= targetPosition - 2000) {
                    speed *= deceleration;
                }

                slotReel.style.transform = `translateY(-${position}px)`;
                slotReel.style.transition = 'none';

                if (position < targetPosition) {
                    requestAnimationFrame(animate);
                } else {
                    // 정확한 위치에 맞추기
                    slotReel.style.transform = `translateY(-${targetPosition}px)`;
                    
                    // 사용된 질문 처리
                    setTimeout(() => {
                        availableQuestions = availableQuestions.filter(q => q !== selectedQuestion);
                        usedQuestions.push(selectedQuestion);
                        updateCounter();
                        
                        isSpinning = false;
                        spinButton.disabled = availableQuestions.length === 0;
                        
                        if (availableQuestions.length === 0) {
                            spinButton.textContent = '모든 질문 완료!';
                        }
                    }, 500);
                }
            }

            animate();
        }

        spinButton.addEventListener('click', spin);

        const resetButton = document.getElementById('resetButton');
        resetButton.addEventListener('click', () => {
            availableQuestions = [...questions];
            usedQuestions = [];
            spinButton.disabled = false;
            spinButton.textContent = '질문 뽑기';
            createSlotItems([questions[0]]);
            slotReel.style.transform = 'translateY(0)';
            updateCounter();
        });

        // 초기 표시
        createSlotItems([questions[0]]);
        updateCounter();
    </script>
</body>
</html>
